<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Freea√ßa√≠ ‚Äî Montar A√ßa√≠</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg: #f6f4fb;
    --card: #ffffff;
    --primary: #6a1b9a;
    --accent: #ff7043;
    --muted: #7b6f85;
    --success: #2e7d32;
    --radius: 14px;
    --glass: rgba(255,255,255,0.7);
    --shadow: 0 10px 30px rgba(20,12,40,0.08);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background: linear-gradient(180deg,#f3e9fb,#f6f4fb);
    color:#222;
    -webkit-font-smoothing:antialiased;
    padding:28px;
    display:flex;
    justify-content:center;
  }

  .wrap{
    width:100%;
    max-width:1000px;
  }

  header{
    display:flex;
    gap:16px;
    align-items:center;
    background: linear-gradient(90deg,var(--primary), #8e24aa);
    color:white;
    padding:18px;
    border-radius:16px;
    box-shadow:var(--shadow);
  }
  header img{width:72px;height:72px;border-radius:12px;object-fit:cover;border:3px solid rgba(255,255,255,0.12)}
  header h1{margin:0;font-size:1.2rem;letter-spacing:0.2px}
  header p{margin:0;font-size:0.9rem;opacity:0.95}

  .grid{
    display:grid;
    grid-template-columns: 1fr 360px;
    gap:20px;
    margin-top:18px;
  }

  /* painel esquerdo (bot√µes) */
  .panel{
    background:var(--card);
    border-radius:14px;
    padding:18px;
    box-shadow:var(--shadow);
  }
  .panel h2{margin:0 0 8px 0;color:var(--primary)}

  .controls { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
  .btn{
    background:linear-gradient(90deg,var(--accent), #f4511e);
    color:white;padding:10px 14px;border-radius:12px;border:none;cursor:pointer;font-weight:600;
    box-shadow: 0 8px 24px rgba(255,112,67,0.12);
  }

  /* summary (direita) */
  .summary {
    background: linear-gradient(180deg,var(--card), #fff);
    padding:18px;border-radius:14px;box-shadow:var(--shadow);position:sticky;top:28px;
  }
  .summary h3{margin:0 0 8px 0;color:var(--primary)}
  #listaPedidos{max-height:52vh;overflow:auto;padding-right:6px}
  .pedido{
    background: #fbf8ff;border-radius:12px;padding:12px;margin-bottom:10px;border:1px solid #efe9f8;position:relative;
  }
  .pedido strong{display:block;margin-bottom:6px}
  .pedido .actions{position:absolute;right:10px;top:8px;display:flex;gap:6px}
  .icon-btn{background:transparent;border:none;padding:6px;border-radius:8px;cursor:pointer;font-size:0.95rem}
  .icon-btn:hover{background:rgba(0,0,0,0.04)}

  .total-row{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
  .total-row .total{font-size:1.15rem;font-weight:700;color:var(--primary)}

  /* modal */
  .modal {
    display:none;position:fixed;inset:0;background:rgba(10,8,16,0.45);z-index:1200;
    align-items:center;justify-content:center;padding:20px;
  }
  .modal.open{display:flex}
  .modal-card{
    width:100%;max-width:720px;background:linear-gradient(180deg,#fff, #fbfaff);border-radius:16px;padding:18px;box-shadow:0 20px 50px rgba(10,8,20,0.3);
    transform-origin:center;animation:pop .18s ease;
  }
  @keyframes pop{from{opacity:0;transform:translateY(10px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}
  .modal-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
  .modal-head h2{margin:0;font-size:1.15rem}
  .close-btn{background:transparent;border:1px solid #eee;padding:8px;border-radius:10px;cursor:pointer}

  .form-grid{
    display:grid;grid-template-columns: 1fr 220px;gap:12px;
  }
  .form-left{padding-right:6px}
  .form-row{margin-bottom:10px}
  label.small{display:block;font-size:0.85rem;color:var(--muted);margin-bottom:6px}
  input[type="text"]{width:100%;padding:10px;border-radius:10px;border:1px solid #e9e3f2;background:#fff}
  /* Tamanhos: visual cards */
  .sizes-grid{display:flex;gap:10px;flex-wrap:wrap}
  .size-card-modal{
    flex:1 1 110px;min-width:98px;background:linear-gradient(180deg,#fff,#fff);border-radius:12px;padding:10px;border:1px solid #eee;
    text-align:center;cursor:pointer;transition:transform .12s ease, box-shadow .12s ease;
  }
  .size-card-modal.active{box-shadow:0 12px 30px rgba(106,27,154,0.12);transform:translateY(-6px);border:2px solid rgba(255,112,67,0.14)}
  .size-qty{font-weight:700;color:var(--primary);margin-top:6px}
  .size-price{font-size:0.9rem;color:var(--muted);margin-top:4px}

  /* frutas as pills */
  .pills{display:flex;gap:8px;flex-wrap:wrap}
  .pill{padding:8px 10px;border-radius:999px;border:1px solid #eee;background:#fff;cursor:pointer}
  .pill.active{background:linear-gradient(90deg,var(--primary), #8e24aa);color:white;border-color:transparent;box-shadow:0 8px 20px rgba(138,36,170,0.12)}

  /* adicionais chips (multi) */
  .chips{display:flex;gap:8px;flex-wrap:wrap}
  .chip{padding:8px 10px;border-radius:999px;border:1px solid #e7e0f5;background:#fff;color:var(--muted);cursor:pointer;font-size:0.9rem}
  .chip.active{background:#fff0e6;border-color:rgba(255,112,67,0.18);color:var(--primary);box-shadow:0 6px 18px rgba(255,112,67,0.08)}

  /* pagamento segmented */
  .segmented{display:flex;background:#fff;border-radius:10px;border:1px solid #eee;overflow:hidden}
  .segmented button{flex:1;padding:10px;border:0;background:transparent;cursor:pointer}
  .segmented button.active{background:linear-gradient(90deg,var(--primary), #8e24aa);color:white}

  /* preview footer */
  .preview{
    margin-top:10px;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fbf7ff,#fff);border:1px solid #f0eafe;display:flex;justify-content:space-between;align-items:center
  }
  .preview .text{font-size:0.95rem;color:var(--muted)}
  .preview .price{font-weight:800;color:var(--accent);font-size:1.05rem}

  /* small responsive */
  @media (max-width:880px){
    .grid{grid-template-columns: 1fr}
    .form-grid{grid-template-columns: 1fr}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <img src="Logo.jpg" alt="Logo Freea√ßa√≠">
      <div>
        <h1>Freea√ßa√≠</h1>
        <p>Monte seu a√ßa√≠ ‚Äî mais r√°pido e visual</p>
      </div>
    </header>

    <div class="grid" style="margin-top:18px">
      <div class="panel">
        <h2>Monte e gerencie pedidos</h2>
        <p style="color:var(--muted);margin:8px 0 14px 0">Clique em <strong>Adicionar A√ßa√≠</strong> para abrir a janela de montagem.</p>
        <div class="controls">
          <button class="btn" onclick="abrirModal()">+ Adicionar A√ßa√≠</button>
          <button class="btn" onclick="finalizarPedido()">Enviar pedido pelo WhatsApp</button>
        </div>
      </div>

      <aside class="summary">
        <h3>Resumo do pedido</h3>
        <div id="listaPedidos" aria-live="polite"></div>

        <div class="total-row">
          <div class="small" style="color:var(--muted)">Total geral</div>
          <div class="total" id="totalGeral">R$ 0,00</div>
        </div>
      </aside>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-head">
        <h2 id="modalTitle">Montar A√ßa√≠</h2>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="close-btn" onclick="fecharModal()">Cancelar</button>
        </div>
      </div>

      <div class="form-grid">
        <div class="form-left">
          <div class="form-row">
            <label class="small">Nome do cliente</label>
            <input type="text" id="inpNome" placeholder="Ex.: Jo√£o Silva">
          </div>

          <div class="form-row">
            <label class="small">Tamanho</label>
            <div class="sizes-grid" id="sizesGrid">
              <div class="size-card-modal" data-price="8" data-text="200 ml - R$ 8,00" onclick="selectSize(this)">
                <div style="font-size:0.95rem;font-weight:600">200 ml</div>
                <div class="size-price">R$ 8,00</div>
              </div>
              <div class="size-card-modal active" data-price="10" data-text="300 ml - R$ 10,00" onclick="selectSize(this)">
                <div style="font-size:0.95rem;font-weight:600">300 ml</div>
                <div class="size-price">R$ 10,00</div>
              </div>
              <div class="size-card-modal" data-price="12" data-text="400 ml - R$ 12,00" onclick="selectSize(this)">
                <div style="font-size:0.95rem;font-weight:600">400 ml</div>
                <div class="size-price">R$ 12,00</div>
              </div>
              <div class="size-card-modal" data-price="14" data-text="500 ml - R$ 14,00" onclick="selectSize(this)">
                <div style="font-size:0.95rem;font-weight:600">500 ml</div>
                <div class="size-price">R$ 14,00</div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <label class="small">Fruta</label>
            <div class="pills" id="pillsFruta">
              <div class="pill active" onclick="selectPill(this)">Uva</div>
              <div class="pill" onclick="selectPill(this)">Banana</div>
              <div class="pill" onclick="selectPill(this)">Morango</div>
            </div>
          </div>

          <div class="form-row">
            <label class="small">Adicionais (toque para selecionar)</label>
            <div class="chips" id="chipsAdicionais">
              <div class="chip" onclick="toggleChip(this)">Leite em p√≥</div>
              <div class="chip" onclick="toggleChip(this)">Castanhas</div>
              <div class="chip" onclick="toggleChip(this)">Leite condensado</div>
              <div class="chip" onclick="toggleChip(this)">Pa√ßoca</div>
              <div class="chip" onclick="toggleChip(this)">Granola</div>
              <div class="chip" onclick="toggleChip(this)">Flocos de arroz</div>
              <div class="chip" onclick="toggleChip(this)">M&M colorido</div>
            </div>
          </div>
        </div>

        <div class="form-right" style="padding-left:6px;display:flex;flex-direction:column;gap:10px">
          <div>
            <label class="small">Forma de pagamento</label>
            <div class="segmented" role="tablist" id="segPagamento">
              <button class="active" onclick="selectPagamento(this)">Pix</button>
              <button onclick="selectPagamento(this)">Cart√£o de cr√©dito</button>
              <button onclick="selectPagamento(this)">Esp√©cie</button>
            </div>
          </div>

          <div>
            <label class="small">Observa√ß√£o (opcional)</label>
            <input type="text" id="obs" placeholder="Ex.: Sem a√ß√∫car, por favor">
          </div>

          <div style="margin-top:auto">
            <div class="preview" aria-hidden="false">
              <div class="text" id="previewText">300 ml ‚Ä¢ Uva ‚Ä¢ Nenhum</div>
              <div class="price" id="previewPrice">R$ 10,00</div>
            </div>

            <div style="display:flex;gap:8px;margin-top:10px">
              <button class="btn" style="flex:1" onclick="salvarAcai()">Salvar A√ßa√≠</button>
              <button class="btn" style="flex:0.6;background:#ddd;color:#333" onclick="fecharModal()">Fechar</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

<script>
  // dados
  let pedidos = [];
  let editIndex = -1;

  // Acessibilidade: fechar com ESC e clicar fora
  document.addEventListener('keydown', (e) => {
    if(e.key === "Escape") fecharModal();
  });
  document.getElementById('modal').addEventListener('click', (e)=>{
    if(e.target.id === 'modal') fecharModal();
  });

  // abrir modal (novo ou editar)
  function abrirModal(index = -1){
    editIndex = index;
    document.getElementById('modal').classList.add('open');

    // reset visual selections
    if(index === -1){
      document.getElementById('inpNome').value = "";
      document.getElementById('obs').value = "";
      // tamanho default: 300 ml (o card com .active)
      document.querySelectorAll('.size-card-modal').forEach((c,i)=> {
        c.classList.toggle('active', c.dataset.price === "10");
      });
      // fruta default
      document.querySelectorAll('#pillsFruta .pill').forEach((p,i)=> p.classList.toggle('active', i===0));
      // limpar chips
      document.querySelectorAll('#chipsAdicionais .chip').forEach(ch => ch.classList.remove('active'));
      // pagamento default
      document.querySelectorAll('#segPagamento button').forEach((b,i)=> b.classList.toggle('active', i===0));
    } else {
      // preencher com dados existentes
      const p = pedidos[index];
      document.getElementById('inpNome').value = p.nome === "N√£o informado" ? "" : p.nome;
      document.getElementById('obs').value = p.obs || "";

      // tamanho: comparar texto
      document.querySelectorAll('.size-card-modal').forEach(c => {
        c.classList.toggle('active', c.dataset.text === p.tamanho);
      });

      // fruta
      document.querySelectorAll('#pillsFruta .pill').forEach(ch => ch.classList.toggle('active', p.fruta === ch.textContent.trim()));

      // adicionais
      document.querySelectorAll('#chipsAdicionais .chip').forEach(ch => {
        ch.classList.toggle('active', p.adicionais.includes(ch.textContent.trim()));
      });

      // pagamento
      document.querySelectorAll('#segPagamento button').forEach(b => {
        b.classList.toggle('active', (b.textContent.trim() === p.pagamento));
      });
    }

    atualizarPreview();
  }

  function fecharModal(){
    document.getElementById('modal').classList.remove('open');
    editIndex = -1;
  }

  // size card select
  function selectSize(el){
    document.querySelectorAll('.size-card-modal').forEach(c => c.classList.remove('active'));
    el.classList.add('active');
    atualizarPreview();
  }

  // fruit pill
  function selectPill(el){
    document.querySelectorAll('#pillsFruta .pill').forEach(p => p.classList.remove('active'));
    el.classList.add('active');
    atualizarPreview();
  }

  // chip toggle
  function toggleChip(el){
    el.classList.toggle('active');
    atualizarPreview();
  }

  // pagamento
  function selectPagamento(btn){
    document.querySelectorAll('#segPagamento button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    atualizarPreview();
  }

  // pega valores do modal
  function coletarModal(){
    const nome = document.getElementById('inpNome').value.trim() || "N√£o informado";
    const tamanhoCard = document.querySelector('.size-card-modal.active');
    const tamanho = tamanhoCard ? tamanhoCard.dataset.text : "300 ml - R$ 10,00";
    const preco = tamanhoCard ? parseFloat(tamanhoCard.dataset.price) : 10;
    const fruta = document.querySelector('#pillsFruta .pill.active')?.textContent.trim() || "Uva";
    const adicionais = Array.from(document.querySelectorAll('#chipsAdicionais .chip.active')).map(c => c.textContent.trim());
    const pagamento = document.querySelector('#segPagamento .active')?.textContent.trim() || "Pix";
    const obs = document.getElementById('obs').value.trim();

    return {nome, tamanho, preco, fruta, adicionais, pagamento, obs};
  }

  // salvar novo ou editar
  function salvarAcai(){
    const dados = coletarModal();

    if(editIndex >= 0){
      pedidos[editIndex] = dados;
    } else {
      pedidos.push(dados);
    }
    fecharModal();
    atualizarLista();
  }

  // atualizar preview dentro do modal
  function atualizarPreview(){
    const tamanhoCard = document.querySelector('.size-card-modal.active');
    const preco = tamanhoCard ? parseFloat(tamanhoCard.dataset.price) : 10;
    const fruta = document.querySelector('#pillsFruta .pill.active')?.textContent.trim() || "Uva";
    const adicionais = Array.from(document.querySelectorAll('#chipsAdicionais .chip.active')).map(c => c.textContent.trim());
    const previewText = `${tamanhoCard ? tamanhoCard.querySelector('div').textContent.trim() : '300 ml'} ‚Ä¢ ${fruta} ‚Ä¢ ${adicionais.length ? adicionais.join(', ') : 'Nenhum'}`;
    document.getElementById('previewText').textContent = previewText;
    document.getElementById('previewPrice').textContent = `R$ ${preco.toFixed(2)}`;
  }

  // atualizar lista lateral
  function atualizarLista(){
    const lista = document.getElementById('listaPedidos');
    lista.innerHTML = '';
    let total = 0;

    pedidos.forEach((p, i) => {
      total += p.preco;
      const div = document.createElement('div');
      div.className = 'pedido';
      div.innerHTML = `
        <div class="actions">
          <button title="Editar" class="icon-btn" onclick="editarAcai(${i})">‚úèÔ∏è</button>
          <button title="Excluir" class="icon-btn" onclick="excluirAcai(${i})">üóëÔ∏è</button>
        </div>
        <strong>A√ßa√≠ ${i+1} ‚Äî R$ ${p.preco.toFixed(2)}</strong>
        <div style="color:var(--muted);font-size:0.95rem;margin-top:6px">
          <div><strong>Cliente:</strong> ${p.nome}</div>
          <div><strong>Tamanho:</strong> ${p.tamanho}</div>
          <div><strong>Fruta:</strong> ${p.fruta}</div>
          <div><strong>Adicionais:</strong> ${p.adicionais.length ? p.adicionais.join(', ') : 'Nenhum'}</div>
          <div><strong>Pagamento:</strong> ${p.pagamento}</div>
          ${p.obs ? `<div><strong>Obs:</strong> ${p.obs}</div>` : ''}
        </div>
      `;
      lista.appendChild(div);
    });

    document.getElementById('totalGeral').textContent = `R$ ${total.toFixed(2)}`;
  }

  function editarAcai(index){
    abrirModal(index);
  }
  function excluirAcai(index){
    if(confirm('Remover este a√ßa√≠ do pedido?')) {
      pedidos.splice(index,1);
      atualizarLista();
    }
  }

  // finalizar pedido -> montar mensagem e abrir whatsapp
  function finalizarPedido(){
    if(pedidos.length === 0){ alert('Adicione pelo menos um a√ßa√≠ antes de enviar.'); return; }
    let msg = "üçß *Pedido de A√ßa√≠* üçß\n";
    let total = 0;
    pedidos.forEach((p,i)=>{
      msg += `\n*A√ßa√≠ ${i+1}:*\nCliente: ${p.nome}\nTamanho: ${p.tamanho}\nFruta: ${p.fruta}\nAdicionais: ${p.adicionais.length ? p.adicionais.join(', ') : 'Nenhum'}\nPagamento: ${p.pagamento}\n${p.obs ? 'Obs: ' + p.obs + '\n' : ''}Pre√ßo: R$ ${p.preco.toFixed(2)}\n`;
      total += p.preco;
    });
    msg += `\n*Total geral:* R$ ${total.toFixed(2)}`;
    const numero = "5599984001466";
    window.open("https://wa.me/" + numero + "?text=" + encodeURIComponent(msg), "_blank");
  }

  // abre modal ao carregar para facilitar teste (opcional)
  // abrirModal();

</script>
</body>
</html>